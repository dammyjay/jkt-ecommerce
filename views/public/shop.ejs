<!-- <div class="shop-container">
  <h1>Our Products</h1>

  <div class="categories">
    <button onclick="filterCategory('all')">All</button>
    <% categories.forEach(cat => { %>
      <button onclick="filterCategory('<%= cat.id %>')"><%= cat.name %></button>
    <% }) %>
  </div>


  <div class="products-grid">
    <% products.forEach(product => { %>
      <div class="product-card" data-category="<%= product.category_id %>">
        <img src="<%= product.image_url %>" alt="<%= product.name %>">
        <h4><%= product.name %></h4>
        <p><%= product.category_name %></p>
        <p>â‚¦<%= product.price.toLocaleString() %></p>
        <a href="/products/<%= product.id %>" class="btn">View Details</a>
      </div>
    <% }) %>
  </div>
</div>

<script>
function filterCategory(categoryId) {
  const cards = document.querySelectorAll('.product-card');
  cards.forEach(card => {
    if (categoryId === 'all' || card.dataset.category === categoryId) {
      card.style.display = 'block';
    } else {
      card.style.display = 'none';
    }
  });
}
</script> -->

<section>
  <div class="container" style="margin-top: 60px;">
    <h1>Our Products</h1>

    <!-- Categories -->
    <div style="margin: 20px 0; display: flex; flex-wrap: wrap; gap: 10px;">
  <button
    class="btn btn-secondary filter-btn btn-filter-active"
    onclick="filterCategory('all', this)"
  >
    All
  </button>

  <% categories.forEach(cat => { %>
    <button
      class="btn btn-secondary filter-btn"
      onclick="filterCategory('<%= cat.id %>', this)"
    >
      <%= cat.name %>
    </button>
  <% }) %>
    </div>


    <!-- Products Grid -->
    <div
      style="
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 20px;
      "
    >
      <% products.forEach(product => { %>
        <div
          class="card product-card"
          data-category="<%= product.category_id %>"
        >
          <img
            src="<%= product.image_url %>"
            alt="<%= product.name %>"
            style="
              width: 100%;
              height: 180px;
              object-fit: cover;
              border-radius: 8px;
              margin-bottom: 10px;
            "
          />

          <h4><%= product.name %></h4>

          <p style="color: var(--color-muted); font-size: 0.9rem;">
            <%= product.category_name %>
          </p>

          <p style="font-weight: 600;">
            â‚¦<%= product.price.toLocaleString() %>
          </p>

          <a
            href="/products/<%= product.id %>"
            class="btn btn-primary btn-full"
            style="margin-top: 10px;"
          >
            View Details
          </a>
        </div>
      <% }) %>
    </div>
  </div>
</section>

<script>
function filterCategory(categoryId, activeBtn) {
  const cards = document.querySelectorAll('.product-card');
  const buttons = document.querySelectorAll('.filter-btn');

  // ðŸ” Reset active state
  buttons.forEach(btn => btn.classList.remove('btn-filter-active'));

  // âœ… Set active button
  activeBtn.classList.add('btn-filter-active');

  // ðŸ” Filter products
  cards.forEach(card => {
    if (categoryId === 'all' || card.dataset.category === categoryId) {
      card.style.display = 'block';
    } else {
      card.style.display = 'none';
    }
  });
}
</script>

